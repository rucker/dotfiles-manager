#!/usr/bin/python

import io

import env

def writeHeader(fileName, fileBuffer):
  fileBuffer.write(unicode("#!/bin/bash\n# " + fileName + ": executed by bash(1) for non-login shells.\n# This file was generated by a script. Do not edit manually!\n"))

def writeInputFileContents(fileName, fileBuffer):
  with open(fileName) as inputFile:
    for line in inputFile:
      fileBuffer.write(unicode(line))

def compileBashProfile():
  with io.StringIO() as fileBuffer:
    writeHeader('~/.bash_profile', fileBuffer)
    writeInputFileContents(env.inputFilesDir + 'bash_common', fileBuffer)
    writeInputFileContents(env.inputFilesDir + 'bash_mac', fileBuffer)
    with open(env.outputFilesDir + 'bash_profile', 'w') as bashProfile:
      bashProfile.write(fileBuffer.getvalue())
